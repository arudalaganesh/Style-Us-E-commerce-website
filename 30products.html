<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STYLE US - Products</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; min-height: 100vh; background-color: #f8f8f8; }
        .header { background-color: #EBE5DF; color: black; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; height: 58px; box-sizing: border-box; border-bottom: 1px solid #ddd; }
        .header-left a { color: black; text-decoration: none; margin-right: 20px; }
        .logo { font-size: 1.5em; font-weight: bold; letter-spacing: 2px; text-align: center; flex-grow: 1; }
        .header-icons { font-size: 1.2em; display: flex; align-items: center; }
        .header-icons span, .header-icons a { margin-left: 15px; color: black; text-decoration: none; }
        .cart-link { position: relative; display: inline-block; }
        .cart-count-badge { position: absolute; top: -8px; right: -12px; background-color: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 0.7em; font-weight: bold; display: none; }
        
        /* UPDATED: Search Form Styling */
        .search-form {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }
        #search-input {
            border: 1px solid #555;
            border-right: none;
            border-radius: 4px 0 0 4px;
            padding: 8px;
            font-size: 0.9em;
            outline: none;
        }
        .search-form button {
            background: #f0f0f0;
            border: 1px solid #555;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            color: #333;
            padding: 6px 10px;
            display: flex;
            align-items: center;
            font-size: 1.1em;
        }

        .main-content { display: flex; min-height: calc(100vh - 58px); border: 3px solid #EBE5DF; }
        .sidebar { width: 200px; padding: 20px 0; background-image: url('background.jpg'); background-size: cover; background-repeat: no-repeat; background-color: #ffffff; border-right: none; min-height: 100%; }
        .sidebar a { display: block; padding: 8px 20px; color: #333; text-decoration: none; font-size: 0.95em; }
        .sidebar .main-category { font-weight: bold; margin-top: 10px; }
        .sidebar .sub-category { padding-left: 30px; font-weight: normal; }

        .product-grid-area { flex-grow: 1; padding: 30px; background-image: url('background.jpg'); background-size: cover; background-repeat: no-repeat; background-color: #f8f8f8; }
        
        /* Title & Back Link Style */
        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .section-title a {
            text-decoration: none;
            color: inherit;
        }
        .section-title a:hover {
            text-decoration: underline;
        }
        
        .product-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 30px; }
        .product-item { background-color: white; padding: 30px; text-align: center; }
        .product-link { text-decoration: none; color: inherit; }
        .product-image-container { width: 350px; height: 350px; margin-bottom: 1px; overflow: hidden; }
        .product-image-container img { width: 350px; height: 300px; object-fit: cover; display: block; }
        .product-name { margin: 5px 0 10px 0; font-weight: bold; }
        .product-price { font-size: 1.1em; font-weight: bold; color: #333; margin: 10px 0; }
    </style>
</head>
<body>

    <div class="header">
        <div class="header-left">
            <a href="homepage.html">Home</a>
        </div>
        <div class="logo">STYLE US</div>
        <div class="header-icons">
            <form id="search-form" class="search-form">
                <input type="search" id="search-input" placeholder="Search...">
                <button type="submit" class="search-button">&#128269;</button>
            </form>
            <a href="login.html"><span>üë§</span></a>
            <a href="cart.html" class="cart-link">
                <span>üõí Cart</span>
                <span id="cart-count" class="cart-count-badge">0</span>
            </a>
        </div>
    </div>

    <div class="main-content">
        <div class="sidebar">
            <a href="#" class="main-category">Mens Fashion</a>
            <a href="#" class="sub-category" onclick="showCategory('tshirts-products'); return false;">T-shirts</a>
            <a href="#" class="sub-category" onclick="showCategory('shirts-products'); return false;">Shirts</a>
            <a href="#" class="sub-category" onclick="showCategory('mens_jeans-products'); return false;">Jeans</a> 
            <a href="#" class="main-category">Womens Fashion</a>
            <a href="#" class="sub-category" onclick="showCategory('dresses-products'); return false;">Dress</a>
            <a href="#" class="sub-category" onclick="showCategory('tops-products'); return false;">Top</a>
            <a href="#" class="sub-category" onclick="showCategory('womens_jeans-products'); return false;">Jeans</a>
        </div>
        <div class="product-grid-area" id="product-grid-area">
            </div>
    </div>

    <script>
        const allProductsData = {
            "tshirts-products": {
                title: "Men's T-Shirts",
                items: [
                    { link: "product_detail.html?image=tshit1.jpg&name=Men Ribbed Regular Fit Polo T-Shirt&price=‚Çπ799&desc=A modern take on a classic. This ribbed polo is crafted from breathable cotton for all-day comfort, perfect for a weekend outing.&reviewSet=1", img: "tshit1.jpg", name: "Men Ribbed Regular Fit Polo T-Shirt", price: "‚Çπ799" },
                    { link: "product_detail.html?image=tshirt2.jpg&name=Men Striped Crew Neck T-Shirt&price=‚Çπ899&desc=Stay stylish with this classic striped crew neck. Made from a soft cotton blend, it offers a comfortable fit for everyday wear.&reviewSet=2", img: "tshirt2.jpg", name: "Men Striped Crew Neck T-Shirt", price: "‚Çπ899" },
                    { link: "product_detail.html?image=tshirt3.jpg&name=Graphic Print Crewneck T-Shirt&price=‚Çπ699&desc=Make a statement with this bold graphic print tee. It's a perfect conversation starter and a great addition to your casual wardrobe.&reviewSet=1", img: "tshirt3.jpg", name: "Graphic Print Crewneck T-Shirt", price: "‚Çπ699" },
                    { link: "product_detail.html?image=tshirt4.jpg&name=V-Neck Cotton T-Shirt&price=‚Çπ599&desc=A versatile V-neck that belongs in every closet. Lightweight and soft, this t-shirt is ideal for layering or wearing on its own.&reviewSet=2", img: "tshirt4.jpg", name: "V-Neck Cotton T-Shirt", price: "‚Çπ599" }
                ]
            },
            "shirts-products": {
                title: "Men's Shirts",
                items: [
                    { link: "product_detail.html?image=shirt1.jpg&name=Classic Oxford Button-Down Shirt&price=‚Çπ1,299&desc=The timeless Oxford shirt. A sharp, versatile piece that works for the office or a smart-casual event. Features a button-down collar.&reviewSet=1", img: "shirt1.jpg", name: "Classic Oxford Button-Down Shirt", price: "‚Çπ1,299" },
                    { link: "product_detail.html?image=shirt2.jpg&name=Casual Linen Blend Shirt&price=‚Çπ1,499&desc=Stay cool and comfortable in our linen blend shirt. Its breathable fabric makes it the perfect choice for warm weather.&reviewSet=2", img: "shirt2.jpg", name: "Casual Linen Blend Shirt", price: "‚Çπ1,499" },
                    { link: "product_detail.html?image=shirt3.jpg&name=Rugged Denim Shirt&price=‚Çπ1,699&desc=A durable and stylish denim shirt that adds a rugged edge to any outfit. Can be worn as a shirt or a light jacket.&reviewSet=1", img: "shirt3.jpg", name: "Rugged Denim Shirt", price: "‚Çπ1,699" },
                    { link: "product_detail.html?image=shirt4.jpg&name=Checked Flannel Shirt&price=‚Çπ1,399&desc=The perfect companion for cooler days. This soft flannel shirt features a classic check pattern and provides cozy warmth.&reviewSet=2", img: "shirt4.jpg", name: "Checked Flannel Shirt", price: "‚Çπ1,399" }
                ]
            },
            "mens_jeans-products": {
                title: "Men's Jeans",
                items: [
                    { link: "product_detail.html?image=jeans.jpg&name=Men's Slim Fit Washed Jeans&price=‚Çπ1,999&desc=Our best-selling slim fit jeans. Tailored for a modern silhouette with a comfortable stretch for all-day wear.&reviewSet=1", img: "jeans.jpg", name: "Men's Slim Fit Washed Jeans", price: "‚Çπ1,999" },
                    { link: "product_detail.html?image=jeans1.jpg&name=Men's Relaxed Fit Light-Wash Jeans&price=‚Çπ1,899&desc=For a more casual, laid-back vibe. These relaxed fit jeans offer maximum comfort without sacrificing style.&reviewSet=2", img: "jeans1.jpg", name: "Men's Relaxed Fit Light-Wash Jeans", price: "‚Çπ1,899" },
                    { link: "product_detail.html?image=jeans2.jpg&name=Men's Tapered Fit Ripped Jeans&price=‚Çπ2,299&desc=Modern style meets urban edge. These tapered jeans feature subtle distressing and rips for a fashionable look.&reviewSet=1", img: "jeans2.jpg", name: "Men's Tapered Fit Ripped Jeans", price: "‚Çπ2,299" },
                    { link: "product_detail.html?image=jeans.jpg&name=Men's Straight Fit Dark-Wash Jeans&price=‚Çπ1,799&desc=A timeless classic. The straight fit and dark wash make these jeans incredibly versatile for any occasion.&reviewSet=2", img: "jeans.jpg", name: "Men's Straight Fit Dark-Wash Jeans", price: "‚Çπ1,799" }
                ]
            },
            "dresses-products": {
                title: "Women's Dresses",
                items: [
                    { link: "product_detail.html?image=dress1.jpg&name=Floral Print Summer Maxi Dress&price=‚Çπ2,499&desc=Breezy and beautiful, this floral maxi dress is your go-to for summer events. Features a lightweight fabric and a flattering silhouette.&reviewSet=3", img: "dress1.jpg", name: "Floral Print Summer Maxi Dress", price: "‚Çπ2,499" },
                    { link: "product_detail.html?image=dress2.jpg&name=Classic A-Line Midi Dress&price=‚Çπ1,999&desc=An elegant A-line dress perfect for work or a dinner date. Its classic cut and solid color make it a versatile wardrobe staple.&reviewSet=4", img: "dress2.jpg", name: "Classic A-Line Midi Dress", price: "‚Çπ1,999" },
                    { link: "product_detail.html?image=dress3.jpg&name=Sleeveless Bodycon Dress&price=‚Çπ1,899&desc=Turn heads in this stunning sleeveless bodycon dress. The stretchy fabric hugs your curves for a chic and confident look.&reviewSet=3", img: "dress3.jpg", name: "Sleeveless Bodycon Dress", price: "‚Çπ1,899" },
                    { link: "product_detail.html?image=dress4.jpg&name=Belted Casual Shirt Dress&price=‚Çπ1,799&desc=Effortless style is easy with this belted shirt dress. It's comfortable, chic, and can be dressed up or down with ease.&reviewSet=4", img: "dress4.jpg", name: "Belted Casual Shirt Dress", price: "‚Çπ1,799" }
                ]
            },
            "tops-products": {
                title: "Women's Tops",
                items: [
                    { link: "product_detail.html?image=top1.jpg&name=Elegant Lace Detail Blouse&price=‚Çπ999&desc=Add a touch of romance to your look with this beautiful blouse, featuring delicate lace detailing on the sleeves and neckline.&reviewSet=3", img: "top1.jpg", name: "Elegant Lace Detail Blouse", price: "‚Çπ999" },
                    { link: "product_detail.html?image=top2.jpg&name=Ribbed Knit Crop Top&price=‚Çπ799&desc=A trendy and versatile ribbed crop top that pairs perfectly with high-waisted jeans, skirts, or shorts.&reviewSet=4", img: "top2.jpg", name: "Ribbed Knit Crop Top", price: "‚Çπ799" },
                    { link: "product_detail.html?image=top3.jpg&name=Stylish Peplum Top&price=‚Çπ1,199&desc=This stylish peplum top creates a flattering silhouette. It's a fashionable choice for a day out or a special occasion.&reviewSet=3", img: "top3.jpg", name: "Stylish Peplum Top", price: "‚Çπ1,199" },
                    { link: "product_detail.html?image=top4.jpg&name=Satin Cami Top&price=‚Çπ899&desc=Luxurious and chic, this satin cami top is perfect for layering under a blazer or wearing on its own for an elegant evening look.&reviewSet=4", img: "top4.jpg", name: "Satin Cami Top", price: "‚Çπ899" }
                ]
            },
            "womens_jeans-products": {
                title: "Women's Jeans",
                items: [
                    { link: "product_detail.html?image=w-jeans1.jpg&name=High-Waist Skinny Fit Jeans&price=‚Çπ1,999&desc=The ultimate wardrobe essential. These high-waist skinny jeans are designed to flatter your figure and provide a sleek, modern look.&reviewSet=3", img: "w-jeans1.jpg", name: "High-Waist Skinny Fit Jeans", price: "‚Çπ1,999" },
                    { link: "product_detail.html?image=w-jeans2.jpg&name=Comfortable Mom Fit Jeans&price=‚Çπ2,199&desc=Embrace a relaxed, vintage-inspired style with these comfortable mom jeans, featuring a high-rise and a tapered leg.&reviewSet=4", img: "w-jeans2.jpg", name: "Comfortable Mom Fit Jeans", price: "‚Çπ2,199" },
                    { link: "product_detail.html?image=w-jeans3.jpg&name=Trendy Wide-Leg Cropped Jeans&price=‚Çπ2,299&desc=Stay on-trend with these wide-leg cropped jeans. They offer a comfortable fit and a fashion-forward silhouette.&reviewSet=3", img: "w-jeans3.jpg", name: "Trendy Wide-Leg Cropped Jeans", price: "‚Çπ2,299" },
                    { link: "product_detail.html?image=w-jeans4.jpg&name=Classic Flared Bootcut Jeans&price=‚Çπ2,099&desc=The classic bootcut is back. These jeans are fitted through the thigh and flare at the knee for a leg-lengthening effect.&reviewSet=4", img: "w-jeans4.jpg", name: "Classic Flared Bootcut Jeans", price: "‚Çπ2,099" }
                ]
            }
        };

        const productGridArea = document.getElementById('product-grid-area');

        function createProductItem(product) {
            return `
                <div class="product-item">
                    <a href="${product.link}" class="product-link">
                        <div class="product-image-container"> <img src="${product.img}" alt="${product.name}"> </div>
                        <div class="product-name">${product.name}</div>
                    </a>
                    <div class="product-price">${product.price}</div>
                </div>
            `;
        }

        function showCategory(categoryId) {
            const category = allProductsData[categoryId];
            if (category) {
                const categoryHtml = `
                    <div class="section-title"><a href="#" onclick="history.back(); return false;">‚Üê Back</a></div>
                    <div class="section-title">${category.title}</div>
                    <div class="product-grid">
                        ${category.items.map(createProductItem).join('')}
                    </div>
                `;
                productGridArea.innerHTML = categoryHtml;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);
            const searchQuery = params.get('search');
            
            if (searchQuery) {
                let resultsHtml = '';
                let foundItems = 0;
                
                const lowerCaseQuery = searchQuery.toLowerCase();
                // A simple singularization for queries ending in 's' but not 'ss' (like 'dress')
                let singularQuery = lowerCaseQuery;
                if (lowerCaseQuery.length > 1 && lowerCaseQuery.endsWith('s') && !lowerCaseQuery.endsWith('ss')) {
                    singularQuery = lowerCaseQuery.slice(0, -1);
                }
                
                // Loop through all products to find matches
                for (const categoryId in allProductsData) {
                    allProductsData[categoryId].items.forEach(product => {
                        const lowerCaseName = product.name.toLowerCase();
                        // Check for match against original query OR the singular version
                        if (lowerCaseName.includes(lowerCaseQuery) || lowerCaseName.includes(singularQuery)) {
                            resultsHtml += createProductItem(product);
                            foundItems++;
                        }
                    });
                }
                
                // Build the complete HTML string for the results page
                let finalHtml = `
                    <div class="section-title"><a href="#" onclick="history.back(); return false;">‚Üê Back</a></div>
                    <div class="section-title">Search Results for: "${searchQuery}"</div>
                `;

                if (foundItems > 0) {
                    finalHtml += `<div class="product-grid">${resultsHtml}</div>`;
                } else {
                    finalHtml += `<p>No products found matching your search.</p>`;
                }

                productGridArea.innerHTML = finalHtml;

            } else {
                const categoryIdFromUrl = window.location.hash.substring(1);
                showCategory(categoryIdFromUrl || 'tshirts-products');
            }
        });
    </script>
    <script>
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartCountBadge = document.getElementById('cart-count');
            if (totalItems > 0) {
                cartCountBadge.textContent = totalItems;
                cartCountBadge.style.display = 'block';
            } else {
                cartCountBadge.style.display = 'none';
            }
        }
        
        document.getElementById('search-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const query = document.getElementById('search-input').value.trim();
            if (query) {
                window.location.href = `30products.html?search=${encodeURIComponent(query)}`;
            }
        });

        if (navigator.userAgent.includes("Edg/")) {
            const searchButtons = document.querySelectorAll('.search-button');
            const edgeIconSvg = `<svg viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor"><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg>`;
            searchButtons.forEach(button => button.innerHTML = edgeIconSvg);
        }

        document.addEventListener('DOMContentLoaded', updateCartCount);
    </script>

</body>
</html>